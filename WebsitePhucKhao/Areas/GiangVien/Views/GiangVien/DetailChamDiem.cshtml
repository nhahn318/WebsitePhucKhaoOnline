@model WebsitePhucKhao.ViewModels.ChamDiemViewModel
@{
    ViewData["Title"] = "Chi tiết chấm điểm";
}

<div class="card shadow-sm p-4 mb-4">
    <h3 class="text-primary mb-4">
        <i class="fas fa-eye me-2"></i>Chi tiết đơn phúc khảo
    </h3>

    <table class="table table-bordered table-striped">
        <tbody>
            <tr>
                <th style="width: 200px;">Mã đơn</th>
                <td>@Model.MaDon</td>
            </tr>
            <tr>
                <th>Sinh viên</th>
                <td>@Model.TenSinhVien</td>
            </tr>
            <tr>
                <th>Môn học</th>
                <td>@Model.TenMonHoc</td>
            </tr>
            <tr>
                <th>Điểm trước phúc khảo</th>
                <td><span class="badge bg-secondary">@Model.DiemTruocPhucKhao</span></td>
            </tr>
            <tr>
                <th>Điểm mong muốn</th>
                <td><span class="badge bg-info">@Model.DiemMongMuon</span></td>
            </tr>
            <tr>
                <th>Điểm sau phúc khảo</th>
                <td><span class="badge bg-success">@Model.DiemSauPhucKhao</span></td>
            </tr>
            <tr>
                <th>Nhận xét giảng viên</th>
                <td>@Model.NhanXet</td>
            </tr>
        </tbody>
    </table>

    <h5 class="mt-4 mb-2 text-decoration-underline">Bài giải tay của giảng viên</h5>
    @if (!string.IsNullOrEmpty(Model.BaiGiaiTayUrl))
    {
        <div class="mb-3">
            @if (Model.BaiGiaiTayUrl.EndsWith(".pdf"))
            {
                <iframe src="@Model.BaiGiaiTayUrl" width="100%" height="500px" style="border: 1px solid #ccc;"></iframe>
            }
            else
            {
                <img src="@Model.BaiGiaiTayUrl" class="img-fluid rounded border" style="max-width: 600px;" />
            }

            <p class="mt-2">
                <a href="@Model.BaiGiaiTayUrl" class="btn btn-outline-primary btn-sm" download>
                    <i class="fas fa-download me-1"></i>Tải bài giải tay
                </a>
            </p>
        </div>
    }
    else
    {
        <p class="text-muted fst-italic">Chưa có bài giải tay được đính kèm.</p>
    }

    <h5 class="mt-4 mb-2 text-decoration-underline">Ảnh bài thi</h5>
    @if (Model.DanhSachAnh != null && Model.DanhSachAnh.Any())
    {
        <div class="row">
            @foreach (var anh in Model.DanhSachAnh)
            {
                <div class="col-md-4 mb-3">
                    <img src="@anh.DuongDanFile" class="img-thumbnail shadow-sm" style="max-height: 300px;" />
                </div>
            }
        </div>
    }
    else
    {
        <p class="text-muted fst-italic">Chưa có ảnh bài thi.</p>
    }

    <div class="text-end mt-4">
        <a asp-action="PhucKhaoDuocPhanCong" class="btn btn-secondary">
            <i class="fas fa-arrow-left me-1"></i>Quay lại danh sách
        </a>
    </div>
</div>
